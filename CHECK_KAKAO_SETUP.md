# 🔧 카카오맵 설정 확인 및 문제 해결

지도가 무한 로딩되는 문제를 해결하기 위한 단계별 가이드입니다.

---

## 🎯 빠른 진단 (3분)

### 1단계: 브라우저 Console 확인

1. **F12** 키 누르기
2. **Console** 탭 클릭
3. 메시지 확인:

#### ✅ 정상 메시지:
```
✅ 카카오맵 API 키 확인됨: e662f16583...
⏳ 카카오맵 스크립트 로딩 시작...
✅ 카카오맵 스크립트 로드 완료
✅ 카카오맵 초기화 완료
```

#### ❌ 오류 메시지:
```
❌ 카카오맵 스크립트 로드 실패
```
또는
```
Failed to load resource: net::ERR_FAILED
```

---

## 🔍 문제별 해결 방법

### 문제 1: "스크립트 로드 실패" 또는 아무 오류도 없이 무한 로딩

**원인:** 카카오 개발자 콘솔에 플랫폼 도메인이 등록되지 않음

**해결:**

1. **https://developers.kakao.com** 접속
2. **로그인**
3. **내 애플리케이션** 클릭
4. API 키를 발급받은 애플리케이션 선택
5. **플랫폼** 탭 클릭
6. **Web 플랫폼 등록** 클릭 (또는 기존 플랫폼 수정)
7. **사이트 도메인** 입력:
   ```
   http://localhost:3000
   ```
   ⚠️ **중요**: `https`가 아닌 `http`입니다!
8. **저장** 클릭
9. 브라우저로 돌아가서 **Ctrl + Shift + R** (강력 새로고침)

---

### 문제 2: "카카오맵 API 키가 설정되지 않았습니다"

**원인:** `.env.local` 파일에 API 키가 없거나 잘못됨

**해결:**

1. `update-kakao-key.bat` 파일 더블클릭
2. 또는 직접 `.env.local` 파일 수정:
   ```env
   NEXT_PUBLIC_KAKAO_MAP_API_KEY=e662f1658324d0a00f8772c2ba45b567
   ```
3. 개발 서버 재시작 (**Ctrl + C** → `npm run dev`)

---

### 문제 3: 브라우저 캐시 문제

**해결:**

1. **Ctrl + Shift + Delete** (캐시 삭제)
2. **캐시된 이미지 및 파일** 선택
3. **데이터 삭제** 클릭
4. 브라우저 새로고침 (**Ctrl + Shift + R**)

**또는 시크릿 모드 사용:**
- Chrome: **Ctrl + Shift + N**
- Edge: **Ctrl + Shift + P**
- http://localhost:3000 접속

---

## 🧪 API 키 직접 테스트

### 방법 1: HTML 테스트 파일 사용

1. 프로젝트 폴더에 `test-kakao-map.html` 파일이 생성되어 있습니다
2. 파일을 브라우저로 열기 (더블클릭 또는 드래그)
3. 상태 메시지 확인:
   - ✅ 초록색: 성공
   - ❌ 빨간색: 실패

**성공하면:**
- 제주도 지도와 중앙 마커가 표시됨
- API 키와 도메인 설정이 정상

**실패하면:**
- 오류 메시지 확인
- 카카오 개발자 콘솔에서 플랫폼 도메인 등록

### 방법 2: Console에서 직접 테스트

브라우저 Console (F12)에서 실행:

```javascript
// API 키 확인
console.log('API Key:', process.env.NEXT_PUBLIC_KAKAO_MAP_API_KEY);

// 카카오 객체 확인
console.log('Kakao:', typeof window.kakao);
console.log('Kakao Maps:', typeof window.kakao?.maps);
```

**결과 해석:**
- `API Key: undefined` → 환경 변수 설정 안 됨, 서버 재시작 필요
- `API Key: e662f16583...` → 정상
- `Kakao: undefined` → 스크립트 로드 실패, 플랫폼 도메인 확인
- `Kakao: object` → 스크립트 로드 성공

---

## ✅ 카카오 개발자 콘솔 설정 체크리스트

https://developers.kakao.com 에서 확인:

- [ ] 애플리케이션이 생성되어 있음
- [ ] **앱 키** 탭에서 JavaScript 키 확인:
  - `e662f1658324d0a00f8772c2ba45b567`
- [ ] **플랫폼** 탭에서 Web 플랫폼 등록 확인
- [ ] 등록된 도메인:
  - ✅ `http://localhost:3000`
  - ❌ `https://localhost:3000` (잘못됨)
  - ❌ `localhost:3000` (프로토콜 누락, 잘못됨)
- [ ] 저장 완료

---

## 🔄 완전한 재설정 (최후의 수단)

모든 것을 처음부터 다시:

### 1. 서버 종료
터미널에서 **Ctrl + C**

### 2. 캐시 삭제
```cmd
cd "C:\Users\USER\Desktop\제주도 푸드맵"
rd /s /q .next
```

### 3. 환경 변수 재설정
`update-kakao-key.bat` 더블클릭

### 4. 브라우저 캐시 삭제
**Ctrl + Shift + Delete**

### 5. 카카오 개발자 콘솔 재확인
플랫폼 도메인 `http://localhost:3000` 등록 확인

### 6. 서버 재시작
```cmd
npm run dev
```

### 7. 시크릿 모드로 접속
**Ctrl + Shift + N** → http://localhost:3000

---

## 📊 정상 작동 확인

### 브라우저 Console 메시지:
```
✅ 카카오맵 API 키 확인됨: e662f16583...
⏳ 카카오맵 스크립트 로딩 시작...
✅ 카카오맵 스크립트 로드 완료
✅ 카카오맵 초기화 완료
```

### 화면에 표시되는 것:
- 🗺️ 제주도 지도
- 📍 10개의 빨간 마커
- 🔘 지역 필터 버튼
- 🔄 지도보기/목록보기 버튼

### 작동하는 기능:
- 마우스 휠로 확대/축소
- 드래그로 지도 이동
- 마커 클릭 시 정보창 표시
- 지역 버튼 클릭 시 필터링

---

## 🆘 여전히 안 될 때

### 다음 정보를 확인해주세요:

1. **브라우저 Console (F12)의 전체 오류 메시지**
2. **카카오 개발자 콘솔 플랫폼 탭 스크린샷**
3. **`test-kakao-map.html` 파일 테스트 결과**

### 가장 흔한 원인 TOP 3:

1. ⚠️ **카카오 개발자 콘솔에 `http://localhost:3000` 미등록** (80%)
2. ⚠️ 브라우저 캐시 문제 (15%)
3. ⚠️ API 키 오타 (5%)

---

**99%의 경우 카카오 개발자 콘솔에 플랫폼 도메인만 등록하면 해결됩니다!** 🎯

